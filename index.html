<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Thunder Over NH — Performers</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; connect-src 'self' https://opensky-network.org https://*.adsbexchange.com; img-src 'self' data: blob: https:; style-src 'self' 'unsafe-inline' https:; script-src 'self' 'unsafe-inline' https:; font-src 'self' data: https:; object-src 'none'; base-uri 'self'; frame-ancestors 'self';" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="icon"
    href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><rect width='64' height='64' rx='8' fill='%230b0f14'/><text x='50%' y='52%' dominant-baseline='middle' text-anchor='middle' fill='%238ab4f8' font-family='system-ui' font-size='28'>✈️</text></svg>">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
  <style>
    :root {
      --bg: #0b0f14;
      --panel: #111;
      --text: #eee;
      --muted: #9aa4b2;
      --brand: #8ab4f8;
      --gold: #ffc107;
      --ok: #16c172;
      --bad: #ef4444
    }

    html,
    body,
    #map {
      height: 100%;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font: 14px system-ui, -apple-system, Segoe UI, Roboto, sans-serif
    }

    a {
      color: var(--brand)
    }

    .pill {
      position: absolute;
      right: 10px;
      top: 10px;
      z-index: 1000;
      background: #111;
      color: var(--brand);
      padding: 6px 10px;
      border-radius: 999px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, .4)
    }

    .legend {
      position: absolute;
      top: 10px;
      left: 56px;
      z-index: 1000;
      background: #111;
      color: #eee;
      padding: 8px 10px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, .4)
    }

    .legend b {
      display: block;
      margin-bottom: 6px
    }

    .badge {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 6px;
      background: #1e293b;
      margin-right: 6px
    }

    .perf {
      background: #b28900;
      color: #000
    }

    .hamburger {
      position: absolute;
      left: 10px;
      top: 10px;
      z-index: 1100;
      width: 36px;
      height: 36px;
      border-radius: 10px;
      background: #111;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, .4);
      cursor: pointer
    }

    .hamburger span {
      display: block;
      width: 18px;
      height: 2px;
      background: #ddd;
      position: relative
    }

    .hamburger span::before,
    .hamburger span::after {
      content: "";
      position: absolute;
      left: 0;
      width: 18px;
      height: 2px;
      background: #ddd
    }

    .hamburger span::before {
      top: -6px
    }

    .hamburger span::after {
      top: 6px
    }

    .drawer {
      position: absolute;
      top: 0;
      left: 0;
      width: 82%;
      max-width: 420px;
      height: 100%;
      background: #0f131a;
      color: #eee;
      box-shadow: 2px 0 18px rgba(0, 0, 0, .5);
      transform: translateX(-100%);
      transition: transform .25s ease;
      z-index: 1200
    }

    .drawer.open {
      transform: translateX(0)
    }

    .drawer header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px;
      border-bottom: 1px solid #222
    }

    .drawer h3 {
      margin: 0;
      font-size: 16px
    }

    .drawer .list {
      overflow: auto;
      height: calc(100% - 56px);
      padding: 10px
    }

    .item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      border-radius: 10px
    }

    .item:hover {
      background: #121a23
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%
    }

    .dot.online {
      background: var(--ok)
    }

    .dot.offline {
      background: var(--bad)
    }

    .meta {
      font-size: 12px;
      color: var(--muted)
    }

    .card {
      position: absolute;
      left: 10px;
      right: 10px;
      bottom: 10px;
      z-index: 1000;
      background: #0f131a;
      border-radius: 14px;
      box-shadow: 0 6px 24px rgba(0, 0, 0, .5);
      display: flex;
      gap: 10px;
      overflow: hidden
    }

    .card img {
      width: 120px;
      height: 90px;
      object-fit: cover;
      background: #000
    }

    .card .cbody {
      padding: 10px
    }

    .card .title {
      font-weight: 600;
      margin-bottom: 4px
    }

    .card .sub {
      color: var(--muted);
      font-size: 12px;
      margin-bottom: 6px
    }

    .small {
      font-size: 12px;
      color: var(--muted)
    }

    .toggle {
      position: absolute;
      right: 10px;
      top: 56px;
      z-index: 1000;
      background: #111;
      color: #ddd;
      padding: 6px 8px;
      border-radius: 10px
    }
  </style>
</head>

<body>
  <div id="map"></div>

  <div class="hamburger" id="menuBtn" aria-label="Open roster menu"><span></span></div>
  <div class="pill" id="status">Loading…</div>
  <div class="legend">
    <b>Thunder Over NH — Performers</b>
    <div><span class="badge">✈️ Live</span> <span class="badge perf">⭐ Highlight</span></div>
    <div style="margin-top:6px;font-size:12px;color:#aaa">Free OpenSky data. Some jets may be dark.</div>
  </div>
  <button class="toggle" id="debugBtn" title="Toggle non-roster traffic (debug)">Show all traffic</button>

  <div class="drawer" id="drawer" aria-hidden="true">
    <header>
      <h3>Performers (online/offline)</h3>
      <button id="closeDrawer"
        style="background:#1b2330;color:#ddd;padding:6px 10px;border-radius:8px;border:none">Close</button>
    </header>
    <div class="list" id="rosterList"></div>
  </div>

  <div class="card" id="infoCard" style="display:none">
    <img id="cardImg" alt="">
    <div class="cbody">
      <div class="title" id="cardTitle"></div>
      <div class="sub" id="cardSub"></div>
      <div class="small" id="cardNote"></div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>
  <script type="module" src="./app/main.js"></script>
</body>

</html>